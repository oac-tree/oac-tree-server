add_executable(sup-automation-server)

target_link_libraries(sup-automation-server
  PRIVATE
  sup-auto-server
  sup-epics::sup-epics
  sup-utils::sup-cli
)

if (CMAKE_CXX_COMPILER_ID STREQUAL "Clang" OR (CMAKE_CXX_COMPILER_ID STREQUAL "GNU" AND CMAKE_CXX_COMPILER_VERSION VERSION_LESS 9.1))
message(VERBOSE "Linking stdc++fs")
target_link_libraries(sup-automation-server PRIVATE stdc++fs)
endif ()

target_sources(sup-automation-server
  PRIVATE
  main.cpp
  utils.cpp
)

# -- Installation --
install(TARGETS sup-automation-server RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR})
